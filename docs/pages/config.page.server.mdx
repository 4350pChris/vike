import { Link } from '@brillout/docpress'
import HeaderFileIntro from '../components/HeaderFileIntro.mdx'

Deep dive about configuring Vike.


## `+config.h.js`

The `+config.h.js` files define the interface between your app and Vike.

```js
// /pages/about/+config.h.js

// Define a new page with URL /about
import { Page } from './Page'
export default { Page }
```
```jsx
// /pages/about/Page.jsx

export default () => <>Vike Demo</>
```

> The URL `/about` is determined by <Link text="Filesystem Routing" href="/filesystem-routing" />.

```js
// /pages/product/+config.h.ts

import Page from './Page'
import type { Config } from 'vike/types'

// Define a new page with URL '/product/@id'
export default {
   Page,
   // Parameterized route for URLs such as /product/1337 and /product/macbook
   route: '/product/@id'
} satisfies Config
```
```js
// /pages/product/Page.jsx

export default pageContext => <>Information about product {pageContext.routeParams.id}</>
```


## `.h.js`

<HeaderFileIntro />

See <Link href="/header-file" /> for more information.


## Other `+` files

For convenience, instead of defining `+config.h.js`, you can define `+Page.js` and `+route.js`.

```js
// /pages/product/+route.js

export default '/product/@id'
```
```js
// /pages/product/+Page.jsx

export default pageContext => <>Information about product {pageContext.routeParams.id}</>
```

Which is equivalent to:


```js
// /pages/product/+config.h.js

import Page from './Page.jsx'

export default {
   Page,
   route: '/product/@id'
}
```
```js
// /pages/product/Page.jsx

export default pageContext => <>Information about product {pageContext.routeParams.id}</>
```


## Overridable defaults

`/pages/+*.js` files (directly under `/pages`) allow you to define hooks and settings that apply to all (<Link href="#different-defaults">or only a group of</Link>) pages.

```js
// /pages/+config.h.js

// Default config values for all pages
export default {
  // Default <title> value
  title: 'My Vike app'
}
```

> `config.title` is provided by the <Link text="UI framework integration" href="/vike-packages#ui-frameworks" />. If you don't use an integration package you can define `config.title` yourself, see <Link href="/meta" />.

The `+config.h.js` file of pages (`/pages/some-page/+config.h.js`) can override default values defined by `/pages/+config.h.js`.

```js
// /pages/about/+config.h.js

export default {
  // We override the <title> value
  title: 'About this app'
}
```

You can also define default values only for a group of pages. As shown, for example, at <Link href="/file-structure#domain-driven" />. You can even use different renderers: some pages can use Vue as SPA, while other pages can use React with SSR.


## Different defaults

There can be different multiple defaults that apply to different groups of pages:

```
# Defaults
/marketing/pages/+title.js
/marketing/pages/+ssr.js
/marketing/pages/+prerender.js
# Pages
/marketing/pages/index/+Page.js
/marketing/pages/about/+Page.js
/marketing/pages/jobs/+Page.js

# Defaults
/admin-panel/pages/+title.js
/admin-panel/pages/+config.h.js
# Pages
/admin-panel/pages/index/+Page.js
```

> We call such structure a <Link text="domain-driven file structure" href='/file-structure#domain-driven' />.

The `marketing/+*.js` files apply as default to `marketing/**/+Page.js`, while `admin-panel/+*.js` apply as default to
`admin-panel/**/+Page.js`.


## `renderer/`

We can use a `renderer/` directory:

```
admin-panel/renderer/+onRenderHtml.js
admin-panel/renderer/+onRenderClient.js
admin-panel/pages/index/+Page.js
```

The hooks `admin-panel/renderer/+onRender{Html,Client}.js` apply as default to all pages `admin-panel/**/+Page.js`.

The `renderer/` directory doesn't add any functionality: `/renderer/+config.h.js` is equivalent to `/pages/+config.h.js`. It's just an (optional) convenience for moving renderer files outside of `pages/` (to avoid cluttering the `pages/` directory). That way, the entire renderer logic can be organized and tucked into a single place `renderer/`.

> The `renderer/` directory is usually only used by users who don't use any <Link text="UI framework integration" href="/vike-packages#ui-frameworks" />.


## Build-time

All `+config.h.js` files are loaded at build-time:

```js
// /pages/some-page/+config.h.js

import Page from './Page.js'

// This log will only be shown:
//  - At development
//  - When building your app
console.log("I will never be shown in production")

export default {
  // However, the code of ./Page.js is included in production runtimes
  Page
}
```

The server and client runtimes don't include the code of `+config.h.js` files but do include the imported code. To understand why see <Link href="/header-file" />.
