import { Link } from '@brillout/docpress'

The `data()` is used for fetching data, see <Link href="/data-fetching" />.

> For a lower-level hook with more control, see <Link href="/onBeforeRender" />.


## Server-side

By default `data()` is loaded and executed only on the server-side. Thus you can directly use ORM/SQL database queries:

```js
// /pages/movies/+data.js

export { data }

// Note how we use `node-fetch`; this file is only run on the server-side, thus we don't need
// to use an isomorphic (aka universal) implementation such as `cross-fetch`.
import fetch from 'node-fetch'

async function data(pageContext) {
  const response = await fetch("https://api.imdb.com/api/movies/")
  const { movies } = await response.json()
  /* Or with an ORM:
  const movies = Movie.findAll() */
  /* Or with SQL:
  const movies = sql`SELECT * FROM movies;` */
  return {
    movies
  }
}
```

> The value returned by `data()` can be of any type. It will be stored in `pageContext.data`. See
> <Link href="/pageContext" />.


## Client Routing

By default, the `data()` and `onBeforeRender()` hooks are loaded only in Node.js;
our data fetching code is always executed in Node.js.
This is convenient as it makes writing data fetching code easier.

If we use [Client Routing](/clientRouting),
then we have the option to [also run these hooks in the client](/onBeforeRender#client-side), i.e. it is not only
called in Node.js but also in the browser (upon page navigation).


## Examples

- <Link href='/examples/react-data-fetching/pages/star-wars/index/+data.ts' />
