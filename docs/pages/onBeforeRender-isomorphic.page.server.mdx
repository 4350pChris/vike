import { RepoLink, Link } from '@brillout/docpress'

> In general, we recommend running `onBeforeRender()` hooks only on the server. (We elaborate below.)

> Running `onBeforeRender()` in the browser only works when using Client Routing.

By default [`onBeforeRender()` runs only on the server](/onBeforeRender)
but, if we use [Client Routing](/clientRouting),
then we also have the option to run it in the browser.
This is achieved by [modifying the `meta` config](/meta#modify-existing-configurations).

For the first page the user visits `onBeforeRender()` is called in Node.js
while for any subsequent page navigation `onBeforeRender()` is called in the browser.

Example:
 - [/examples/react-full-v1/](https://github.com/vikejs/vike/blob/01cc674498ea8baa289bfccb633d04b4d6cc7958/examples/react-full-v1/)
   - Config defintion: [/renderer/+config.h.ts > `meta.onBeforeRenderIsomorph`](https://github.com/vikejs/vike/blob/01cc674498ea8baa289bfccb633d04b4d6cc7958/examples/react-full-v1/renderer/+config.h.ts#L14-L33)
   - Config usage: [/pages/star-wars/@id/+onBeforeRenderIsomorph.ts](https://github.com/vikejs/vike/blob/01cc674498ea8baa289bfccb633d04b4d6cc7958/examples/react-full-v1/pages/star-wars/@id/+onBeforeRenderIsomorph.ts)
   - Hook: [/pages/star-wars/@id/+onBeforeRender.tsx](https://github.com/vikejs/vike/blob/01cc674498ea8baa289bfccb633d04b4d6cc7958/examples/react-full-v1/pages/star-wars/@id/+onBeforeRender.tsx)


## Recommendation

In general, we recommend running `onBeforeRender()` only server-side since it's easier to write code that only runs
in Node.js.

That said, if we want to minimize requests made to our Node.js server, then we may want to run `onBeforeRender()` client-side too.
But then we need to ensure that our `onBeforeRender()` hook is isomorphic: it needs to be able to run in both Node.js and the browser.

## Server Routing

If we use <Link href="/server-routing" noBreadcrumb={true} /> we shouldn't
[modify the `meta` config](/meta#modify-existing-configurations) to run `onBeforeRender()` in the browser, as this would
cause the browser to load `onBeforeRender()` but never call it.
